{
  "db_name": "PostgreSQL",
  "query": "\n            WITH years AS (\n                SELECT generate_series($1 - 4, $1) AS year\n            )\n            SELECT\n                y.year::text AS \"year!\",\n                COALESCE(SUM(t.amount), 0)::bigint AS \"total_amount!\"\n            FROM\n                years y\n            LEFT JOIN\n                transactions t ON EXTRACT(YEAR FROM t.transaction_time) = y.year\n                AND t.deleted_at IS NULL\n            LEFT JOIN\n                merchants m ON t.merchant_id = m.merchant_id\n                AND m.deleted_at IS NULL\n                AND m.api_key = $2\n            GROUP BY\n                y.year\n            ORDER BY\n                y.year DESC\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "year!",
        "type_info": "Text"
      },
      {
        "ordinal": 1,
        "name": "total_amount!",
        "type_info": "Int8"
      }
    ],
    "parameters": {
      "Left": [
        "Int4",
        "Text"
      ]
    },
    "nullable": [
      null,
      null
    ]
  },
  "hash": "c65f9914fef3c31904730bf28cf9060c52ca49727123ea8ef6a5d968e03e1abf"
}
